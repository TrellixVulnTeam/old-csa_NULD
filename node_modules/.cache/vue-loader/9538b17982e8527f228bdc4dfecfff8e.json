{"remainingRequest":"/Users/wrunge/workspace/common/CSA/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wrunge/workspace/common/CSA/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wrunge/workspace/common/CSA/src/views/Login.vue","mtime":1623863337805},{"path":"/Users/wrunge/workspace/common/CSA/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wrunge/workspace/common/CSA/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wrunge/workspace/common/CSA/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wrunge/workspace/common/CSA/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7ICBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCB1cmxzIGZyb20gJ0BleHBsb3JlbGVhcm5pbmcvdXJscyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHsKICAgICAgICB1c2VybmFtZTogIiIsCiAgICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICB9LAogICAgICBzaG93OiB0cnVlLAogICAgICBsb2dpbkFsZXJ0OiBudWxsLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoJ3BsYXRmb3JtL2FwcCcsIFsnbG9naW4nLCAnaW5pdEFwcCcsICdpbml0QXBpJyxdKSwKICAgIGFzeW5jIG9uU3VibWl0KGV2ZW50KSB7CiAgICAgICAgdGhpcy5sb2dpbkFsZXJ0ID0gbnVsbDsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgY29uc3QgeyB1c2VybmFtZSwgcGFzc3dvcmQgfSA9IHRoaXMuZm9ybTsKICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCB0aGlzLmxvZ2luKHsgdXNlcm5hbWUsIHBhc3N3b3JkLCB1cmw6IGAke3VybHMuZ2V0VXJscygpLnNlcnZpY2VzfS9wbGF0Zm9ybS9hdXRoL2xvZ2luL2NzYWAgfSk7CiAgICAgICAgCiAgICAgICAgYXdhaXQgdGhpcy5pbml0QXBpKCk7CiAgICAgICAgYXdhaXQgdGhpcy5pbml0QXBwKCk7CiAgICAgICAgdGhpcy51c2VybmFtZSA9ICcnOwogICAgICAgIHRoaXMucGFzc3dvcmQgPSAnJzsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnLycpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgIGlmIChlLm1lc3NhZ2UuaW5jbHVkZXMoIjQwMyIpKSB7CiAgICAgICAgICAgICAgdGhpcy5sb2dpbkFsZXJ0ID0gIllvdSBkbyBub3QgaGF2ZSB0aGUgY29ycmVjdCBwZXJtaXNzaW9ucyB0byBhY2Nlc3MgdGhpcyBhcHAiOwogICAgICAgICAgICB9IGVsc2UgaWYgKGUubWVzc2FnZS5pbmNsdWRlcygiNDAxIikpIHsKICAgICAgICAgICAgICB0aGlzLmxvZ2luQWxlcnQgPSAiSW52YWxpZCBjcmVkZW50aWFscyI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMubG9naW5BbGVydCA9ICJVbmtub3duIGVycm9yLCBjb250YWN0IGRldmVsb3BlciIKICAgICAgICAgIH0KICAgICAgICAKICAgICAgfQogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"login\">\n      <b-card style=\"width:300px\" class=\"mx-auto shadow\">\n\n          <b-card-text >\n\n    <b-form @submit=\"onSubmit\">\n\n        <b-alert :show=\"!!loginAlert\" variant=\"danger\" dismissible>\n        {{loginAlert}}\n        </b-alert>\n\n      <b-form-group\n        id=\"username-input-group\"\n        label=\"Username:\"\n        label-for=\"username-input\"\n      >\n        <b-form-input\n          id=\"username-input\"\n          v-model=\"form.username\"\n          type=\"text\"\n          placeholder=\"Enter username\"\n          required\n        ></b-form-input>\n      </b-form-group>\n\n      <b-form-group\n        id=\"password-input-group\"\n        label=\"Passsword:\"\n        label-for=\"password-input\"\n      >\n        <b-form-input\n          id=\"password-input\"\n          type=\"password\"\n          v-model=\"form.password\"\n          placeholder=\"Enter Password\"\n          required\n        ></b-form-input>\n      </b-form-group>\n\n      <b-button type=\"submit\" variant=\"primary\">Login</b-button>\n    </b-form>\n          </b-card-text>\n          \n      </b-card>\n  </div>\n</template>\n\n<script>\nimport {  mapActions } from 'vuex';\nimport urls from '@explorelearning/urls';\n\nexport default {\n  data() {\n    return {\n      form: {\n        username: \"\",\n        password: \"\",\n      },\n      show: true,\n      loginAlert: null,\n    };\n  },\n  methods: {\n    ...mapActions('platform/app', ['login', 'initApp', 'initApi',]),\n    async onSubmit(event) {\n        this.loginAlert = null;\n      event.preventDefault();\n      const { username, password } = this.form;\n      try {\n        await this.login({ username, password, url: `${urls.getUrls().services}/platform/auth/login/csa` });\n        \n        await this.initApi();\n        await this.initApp();\n        this.username = '';\n        this.password = '';\n        this.$router.push('/');\n      } catch (e) {\n          console.log(e);\n          if (e.message.includes(\"403\")) {\n              this.loginAlert = \"You do not have the correct permissions to access this app\";\n            } else if (e.message.includes(\"401\")) {\n              this.loginAlert = \"Invalid credentials\";\n            } else {\n            this.loginAlert = \"Unknown error, contact developer\"\n          }\n        \n      }\n    },\n  },\n};\n</script>\n"]}]}